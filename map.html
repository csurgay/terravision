<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reading Map Data</title>
    <style>
        body { background: #222; color: #fff; font-family: monospace; }
        pre { line-height: 80%; font-size: 8px; }
    </style>
</head>
<body>
<canvas id="globeCanvas" width="1000" height="900" style="background:#222;display:block;"></canvas>
<script>
    console.log('Reading Map Data');
    const canvas = document.getElementById('globeCanvas');
    const ctx = canvas.getContext('2d');
    var text="";
    const img=new Image();
    img.crossOrigin = "Anonymous";
    img.src='earth.png';
    img.onload=()=>{
        ctx.drawImage(img,0,0,img.width,img.height);
        text += '[\n';
        for (let y=0; y<img.height; y+=1) {
            text+='"'
            for (let x=0; x<img.width; x+=1) {
                const pixel = ctx.getImageData(x, y, 1, 1).data;
                const r = pixel[0], g = pixel[1], b = pixel[2];
                console.log(`Pixel at (${x}, ${y}): R=${r}, G=${g}, B=${b}`);
                let char="-";
                if (r < 100 && g < 100 && b < 100) {
                    ctx.fillStyle = 'rgb(255,255,255)';
                    ctx.fillRect(x, y+450, 1, 1);
                    char="W";
                }
                text += char;
            }
            text += '",\n';
        }
        text += ']\n';
        var blob = new Blob([text], { type: 'text/plain' });
        var link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'myTextFile.txt';
        link.click();
        console.log('Map data processed');
    }
</script>
</body>
</html>
